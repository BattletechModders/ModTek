<Project>
  <!-- PublicizeAssemblies is from Krafs.Publicizer -->
  <Target
    Name="ModTekInjectorsRunner"
    DependsOnTargets="ResolveAssemblyReferences"
    BeforeTargets="PublicizeAssemblies;ResolveReferences"
  >
    <!-- TODO reference path thing does not work, first build still fails (rider opt?) -->
    <ModTekInjectorsRunner ReferencePaths="@(ReferencePath)">
      <Output TaskParameter="ReferencePathsToDelete" ItemName="_ModTekReferencePathsToDelete" />
      <Output TaskParameter="ReferencePathsToAdd" ItemName="_ModTekReferencePathsToAdd" />
    </ModTekInjectorsRunner>

    <ItemGroup>
      <ReferencePath Remove="@(_ModTekReferencePathsToDelete)" />
      <ReferencePath Include="@(_ModTekReferencePathsToAdd)" />
    </ItemGroup>
  </Target>
</Project>
